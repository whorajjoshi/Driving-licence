<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <title>Apply for Learning Driving Licence - Licence Seva Consultancy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background: #fff; color: #333; }
    input, select, textarea {
      border: 1px solid #ddd; border-radius: 8px; padding: 8px 10px;
      width: 100%; font-size: 14px;
    }
    label { font-weight: 600; font-size: 14px; }
    .whatsapp-float {
      position: fixed; width: 60px; height: 60px; bottom: 20px; right: 20px;
      background-color: #25d366; color: #fff; border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      font-size: 30px; box-shadow: 0 3px 10px rgba(0,0,0,0.3);
      z-index: 100; transition: transform 0.2s ease;
    }
    .whatsapp-float:hover { transform: scale(1.08); }
  </style>
</head>
<body class="bg-orange-50">

  <!-- Header -->
  <header class="bg-orange-600 text-white text-center py-4 shadow-md relative">
    <a href="index.html" class="absolute left-4 top-1/2 -translate-y-1/2 text-white text-lg font-semibold hover:text-orange-200">‚Üê Back</a>
    <h1 class="text-xl font-bold">Learning Driving Licence Application</h1>
  </header>

  <main class="max-w-3xl mx-auto p-4">

    <!-- Apply Now Form -->
    <section class="bg-orange-100 p-5 rounded-xl shadow mb-4 text-center">
      <h2 class="text-lg font-bold text-orange-700 mb-3">Apply Now for Learning Licence</h2>
      <p class="text-sm text-gray-700 mb-3">Fill in your details below. Our team will contact you shortly after verification.</p>

      <form id="llForm" class="bg-white p-5 rounded-xl shadow text-left space-y-3" enctype="multipart/form-data">

        <div>
          <label>Full Name</label>
          <input name="fullName" type="text" placeholder="Enter your full name" required />
        </div>

        <div>
          <label>Mobile Number</label>
          <input name="mobile" type="tel" placeholder="Enter your mobile number" required />
        </div>

        <div>
          <label>Email ID</label>
          <input name="email" type="email" placeholder="Enter your email address" />
        </div>

        <div>
          <label>Full Address</label>
          <textarea name="address" rows="2" placeholder="Enter your complete address"></textarea>
        </div>

        <div>
          <label>Date of Birth</label>
          <input name="dob" type="date" required />
        </div>

        <!-- Vehicle Type -->
        <div>
          <label>Vehicle Type</label>
          <div class="flex flex-col gap-2 mt-2 ml-1">
            <label class="flex items-center gap-2"><input type="checkbox" name="vehicle" value="Two Wheeler" class="w-4 h-4" /> Two Wheeler</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="vehicle" value="Four Wheeler (LMV)" class="w-4 h-4" /> Four Wheeler (LMV)</label>
            <label class="flex items-center gap-2"><input type="checkbox" name="vehicle" value="Heavy Vehicle" class="w-4 h-4" /> Heavy Vehicle</label>
          </div>
        </div>

        <!-- Uploads -->
        <div>
          <label>Upload Aadhaar - Front</label>
          <input id="aadhaarFront" name="aadhaarFront" type="file" accept=".jpg,.png,.jpeg,.pdf" required />
        </div>

        <div>
          <label>Upload Aadhaar - Back</label>
          <input id="aadhaarBack" name="aadhaarBack" type="file" accept=".jpg,.png,.jpeg,.pdf" required />
        </div>

        <div>
          <label>Upload Photo</label>
          <input id="photo" name="photo" type="file" accept="image/*" required />
        </div>

        <div>
          <label>Upload Signature (optional)</label>
          <input id="signature" name="signature" type="file" accept="image/*" />
        </div>

        <div class="text-center mt-5">
          <p class="text-sm mb-2 font-medium">Total Payable Amount: <span class="text-orange-600 font-bold">‚Çπ749</span></p>
          <button id="submitBtn" type="submit" class="bg-orange-600 text-white px-6 py-2 rounded-lg shadow hover:bg-orange-700 transition">
            üí≥ Proceed to Payment
          </button>
        </div>
      </form>
    </section>
  </main>

  <!-- Floating WhatsApp Button -->
  <a href="https://wa.me/919876543210" target="_blank" class="whatsapp-float" aria-label="Chat on WhatsApp">
    <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="30" height="30">
      <path d="M16.67 13.12c-.27-.13-1.6-.79-1.85-.88-.25-.09-.43-.13-.62.13-.18.27-.71.88-.88 1.06-.16.18-.32.2-.59.07-.27-.13-1.14-.42-2.17-1.34-.8-.71-1.34-1.58-1.5-1.85-.16-.27-.02-.41.12-.54.13-.13.27-.32.4-.48.13-.16.18-.27.27-.45.09-.18.04-.34-.02-.47-.07-.13-.62-1.5-.85-2.06-.22-.53-.45-.46-.62-.46h-.53c-.18 0-.47.07-.72.34s-.94.91-.94 2.22.96 2.57 1.09 2.75c.13.18 1.88 2.88 4.56 4.04.64.28 1.14.45 1.53.57.64.2 1.22.17 1.68.1.51-.08 1.6-.65 1.83-1.28.23-.63.23-1.17.16-1.28-.07-.11-.25-.18-.52-.31z"/>
      <path d="M20.52 3.48C18.24 1.2 15.23 0 12 0 5.38 0 .02 5.36.02 12c0 2.12.55 4.19 1.59 6.03L0 24l6.16-1.59c1.78.97 3.8 1.48 5.84 1.48h.01c6.63 0 12-5.36 12-12 0-3.23-1.2-6.24-3.48-8.52zM12 21.5h-.01c-1.86 0-3.68-.5-5.27-1.44l-.38-.22-3.65.94.97-3.56-.25-.37c-.99-1.57-1.51-3.39-1.51-5.26 0-5.45 4.43-9.88 9.88-9.88 2.64 0 5.12 1.03 6.98 2.9 1.86 1.86 2.9 4.34 2.9 6.98 0 5.45-4.43 9.88-9.88 9.88z"/>
    </svg>
  </a>

  <footer class="text-center text-gray-600 py-3 bg-orange-100 border-t rounded-t-2xl text-sm">
    ¬© 2025 Licence Seva Consultancy ‚Äî All Rights Reserved.
  </footer>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwh-POt8gynByDK8wtMSBiR4_WPzK9uVzNDPdfQQqSA/dev';
    const form = document.getElementById('llForm');
    const submitBtn = document.getElementById('submitBtn');

    const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB

    function validateFileSize(fileInput, label) {
      const file = fileInput.files[0];
      if (file && file.size > MAX_FILE_SIZE) {
        alert(`‚ö†Ô∏è ${label} ‡§ï‡•Ä ‡§´‡§æ‡§á‡§≤ ‡§¨‡§π‡•Å‡§§ ‡§¨‡§°‡§º‡•Ä ‡§π‡•à (Max 5MB)\n"${file.name}" is ${(file.size/1024/1024).toFixed(2)} MB`);
        fileInput.value = "";
        return false;
      }
      return true;
    }

    ['aadhaarFront','aadhaarBack','photo','signature'].forEach(id=>{
      const input=document.getElementById(id);
      if(input) input.addEventListener('change',e=>{
        validateFileSize(e.target, e.target.previousElementSibling.innerText);
      });
    });

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      submitBtn.disabled=true;
      submitBtn.textContent='Sending...';

      try {
        const fullName=form.fullName.value.trim();
        const mobile=form.mobile.value.trim();
        const email=form.email.value.trim();
        const address=form.address.value.trim();
        const dob=form.dob.value;
        const vehicleTypes=Array.from(form.querySelectorAll('input[name="vehicle"]:checked')).map(c=>c.value).join(', ');

        const aadhaarFrontFile=document.getElementById('aadhaarFront').files[0];
        const aadhaarBackFile=document.getElementById('aadhaarBack').files[0];
        const photoFile=document.getElementById('photo').files[0];
        const signatureFile=document.getElementById('signature').files[0];

        const payload={
          timestamp:new Date().toISOString(),
          fullName,mobile,email,address,dob,vehicleType:vehicleTypes,
          aadhaarFrontName:aadhaarFrontFile?.name||'',
          aadhaarBackName:aadhaarBackFile?.name||'',
          photoName:photoFile?.name||'',
          signatureName:signatureFile?.name||''
        };

        const res=await fetch(scriptURL,{
          method:'POST',
          body:JSON.stringify(payload),
          headers:{'Content-Type':'application/json'}
        });

        if(!res.ok) throw new Error('Network error');
        alert('‚úÖ Application submitted successfully!');
        form.reset();
      } catch(err){
        console.error(err);
        alert('‚ùå Submission failed. Please try again.');
      } finally {
        submitBtn.disabled=false;
        submitBtn.textContent='üí≥ Proceed to Payment';
      }
    });
  </script>
</body>
</html>
